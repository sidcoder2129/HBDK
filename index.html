<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBD KASHISH</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background Particles */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: float 6s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-10px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Photo Slideshow - Full Screen */
        .slideshow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1001;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: none;
            opacity: 0;
            animation: slideshowFadeIn 1.5s ease-out forwards;
        }

        .slideshow-container.show {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        @keyframes slideshowFadeIn {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .slide {
            display: none;
            max-width: 90vw;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 5px solid rgba(255, 255, 255, 0.9);
            animation: slideIn 1s ease-in-out;
        }

        .slide.active {
            display: block;
        }

        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: scale(0.8) rotateY(90deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
        }

        .slideshow-nav {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1002;
        }

        .nav-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .nav-dot.active {
            background: #fff;
            transform: scale(1.4);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }

        /* Close button for slideshow */
        .close-slideshow {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            color: white;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 1002;
        }

        .close-slideshow:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Canvas for fireworks */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
            pointer-events: none;
        }

        /* Enhanced Birthday cake styles */
        .cake-container {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            animation: cakeAppear 1.5s ease-out forwards;
        }

        .cake-container.show {
            display: block;
        }

        @keyframes cakeAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3) rotateY(180deg);
            }
            50% {
                opacity: 0.7;
                transform: translate(-50%, -50%) scale(0.8) rotateY(90deg);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotateY(0deg);
            }
        }

        #cake {
            display: block;
            position: relative;
            margin: -10em auto 0 auto;
            filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4));
            animation: cakeGlow 3s ease-in-out infinite alternate;
        }

        @keyframes cakeGlow {
            0% {
                filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 20px rgba(255, 182, 193, 0.3));
            }
            100% {
                filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 40px rgba(255, 182, 193, 0.6));
            }
        }

        /* Enhanced Candle with multiple colors */
        .cake {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e, #ffa8a8);
            border-radius: 12px;
            position: absolute;
            top: 228px;
            left: 50%;
            margin-left: -3px;
            margin-top: -8px;
            width: 6px;
            height: 40px;
            transform: translateY(-300px);
            backface-visibility: hidden;
            animation: candleIn 800ms 6s ease-out forwards;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .cake:after,
        .cake:before {
            background: linear-gradient(45deg, rgba(255, 0, 0, 0.6), rgba(255, 100, 100, 0.8));
            content: "";
            position: absolute;
            width: 100%;
            height: 3px;
            border-radius: 2px;
        }

        .cake:after {
            top: 30%;
            left: 0;
        }

        .cake:before {
            top: 60%;
            left: 0;
        }

        @keyframes candleIn {
            0% {
                transform: translateY(-300px) scale(0.5);
                opacity: 0;
            }
            50% {
                transform: translateY(-150px) scale(1.2);
                opacity: 0.7;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        /* Enhanced Fire animation with multiple flames */
        .fuego {
            border-radius: 100%;
            position: absolute;
            top: -25px;
            left: 50%;
            margin-left: -3px;
            width: 8px;
            height: 20px;
        }

        .fuego:nth-child(1) { 
            animation: fuego1 2s 6.8s infinite;
            background: radial-gradient(circle, #ffeb3b, #ff9800);
        }
        .fuego:nth-child(2) { 
            animation: fuego2 1.8s 6.8s infinite;
            background: radial-gradient(circle, #ff5722, #ffeb3b);
        }
        .fuego:nth-child(3) { 
            animation: fuego3 1.2s 6.8s infinite;
            background: radial-gradient(circle, #ffeb3b, #ff5722);
        }
        .fuego:nth-child(4) { 
            animation: fuego4 0.8s 6.8s infinite;
            background: radial-gradient(circle, #ff9800, #ffeb3b);
        }
        .fuego:nth-child(5) { 
            animation: fuego5 0.4s 6.8s infinite;
            background: radial-gradient(circle, #ffeb3b, #ffffff);
        }

        @keyframes fuego1 {
            0%, 100% {
                background: radial-gradient(circle, rgba(255, 235, 59, 0.8), rgba(255, 152, 0, 0.6));
                box-shadow: 0 0 30px 8px rgba(255, 235, 59, 0.3);
                transform: translateY(0) scale(1) rotate(-2deg);
            }
            50% {
                background: radial-gradient(circle, rgba(255, 87, 34, 0.9), rgba(255, 235, 59, 0.7));
                box-shadow: 0 0 40px 15px rgba(255, 87, 34, 0.4);
                transform: translateY(-15px) scale(0.8) rotate(2deg);
            }
        }

        @keyframes fuego2 {
            0%, 100% {
                background: radial-gradient(circle, rgba(255, 87, 34, 0.7), rgba(255, 235, 59, 0.5));
                transform: translateY(2px) scale(0.9) rotate(1deg);
            }
            50% {
                background: radial-gradient(circle, rgba(255, 235, 59, 0.8), rgba(255, 87, 34, 0.6));
                transform: translateY(-18px) scale(0.7) rotate(-1deg);
            }
        }

        @keyframes fuego3 {
            0%, 100% {
                background: radial-gradient(circle, rgba(255, 235, 59, 0.6), rgba(255, 87, 34, 0.4));
                transform: translateY(1px) scale(0.8) rotate(-1deg);
            }
            50% {
                background: radial-gradient(circle, rgba(255, 87, 34, 0.7), rgba(255, 235, 59, 0.5));
                transform: translateY(-20px) scale(0.6) rotate(1deg);
            }
        }

        @keyframes fuego4 {
            0%, 100% {
                background: radial-gradient(circle, rgba(255, 152, 0, 0.5), rgba(255, 235, 59, 0.3));
                transform: translateY(0) scale(0.7) rotate(0deg);
            }
            50% {
                background: radial-gradient(circle, rgba(255, 235, 59, 0.6), rgba(255, 152, 0, 0.4));
                transform: translateY(-22px) scale(0.5) rotate(0deg);
            }
        }

        @keyframes fuego5 {
            0%, 100% {
                background: radial-gradient(circle, rgba(255, 235, 59, 0.4), rgba(255, 255, 255, 0.2));
                transform: translateY(-1px) scale(0.6) rotate(0deg);
            }
            50% {
                background: radial-gradient(circle, rgba(255, 255, 255, 0.5), rgba(255, 235, 59, 0.3));
                transform: translateY(-25px) scale(0.4) rotate(0deg);
            }
        }

        .birthday-text {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            font-weight: 700;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            animation: textFadeIn 1.5s ease-out 8s forwards;
            z-index: 101;
        }

        .birthday-text h1 {
            font-size: 3em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #ff6b6b);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 4s ease infinite;
        }

        .birthday-text .name {
            font-size: 2.2em;
            color: #ffeaa7;
            margin-top: 15px;
            text-shadow: 3px 3px 15px rgba(0, 0, 0, 0.6);
        }

        @keyframes textFadeIn {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(50px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translateX(-50%) translateY(25px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(0) scale(1);
            }
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Enhanced Confetti */
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: confetti-fall 4s linear infinite;
        }

        .confetti:nth-child(odd) {
            border-radius: 0;
            width: 8px;
            height: 8px;
            animation-delay: -0.5s;
        }

        .confetti:nth-child(3n) {
            width: 6px;
            height: 15px;
            border-radius: 3px;
            animation-delay: -1s;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(1080deg);
                opacity: 0;
            }
        }

        /* Music control */
        .music-control {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            padding: 15px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
            color: white;
            font-size: 24px;
        }

        .music-control:hover {
            transform: scale(1.2);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.6);
        }

        /* Floating hearts */
        .heart {
            position: absolute;
            color: #ff6b6b;
            font-size: 20px;
            animation: floatHeart 4s ease-in-out infinite;
            pointer-events: none;
            z-index: 50;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(90vh) rotate(45deg) scale(1);
            }
            90% {
                opacity: 1;
                transform: translateY(10vh) rotate(315deg) scale(1);
            }
            100% {
                transform: translateY(-10vh) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        /* Enhanced cake SVG styling */
        #cake path {
            transition: all 0.3s ease;
        }

        #cake path:hover {
            filter: brightness(1.2);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .birthday-text h1 {
                font-size: 2.2em;
            }
            .birthday-text .name {
                font-size: 1.6em;
            }
            
            .slide {
                max-width: 95vw;
                max-height: 85vh;
                border: 3px solid rgba(255, 255, 255, 0.9);
            }
            
            .close-slideshow {
                top: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
            
            .slideshow-nav {
                bottom: 20px;
                gap: 12px;
            }
            
            .nav-dot {
                width: 12px;
                height: 12px;
            }
        }

        /* Sparkle effects */
        @keyframes sparkle {
            0% {
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Photo Slideshow - Full Screen -->
    <div class="slideshow-container" id="slideshowContainer">
        <div class="close-slideshow" onclick="closeSlideshow()">×</div>
        <img src="image1.jpg" alt="Memory 1" class="slide active">
        <img src="image2.jpg" alt="Memory 2" class="slide">
        <img src="image3.jpg" alt="Memory 3" class="slide">
        <img src="image4.jpg" alt="Memory 4" class="slide">
        <img src="image5.jpg" alt="Memory 5" class="slide">
        <img src="image6.jpg" alt="Memory 6" class="slide">
        
        <div class="slideshow-nav">
            <span class="nav-dot active" onclick="currentSlide(1)"></span>
            <span class="nav-dot" onclick="currentSlide(2)"></span>
            <span class="nav-dot" onclick="currentSlide(3)"></span>
            <span class="nav-dot" onclick="currentSlide(4)"></span>
            <span class="nav-dot" onclick="currentSlide(5)"></span>
            <span class="nav-dot" onclick="currentSlide(6)"></span>
        </div>
    </div>

    <!-- Canvas for fireworks -->
    <canvas id="c"></canvas>

    <!-- Enhanced Birthday Cake -->
    <div class="cake-container" id="cakeContainer">
        <div class="cake">
            <div class="fuego"></div>
            <div class="fuego"></div>
            <div class="fuego"></div>
            <div class="fuego"></div>
            <div class="fuego"></div>
        </div>
        <svg id="cake" version="1.1" x="0px" y="0px" width="220px" height="520px" viewBox="0 0 220 520" enable-background="new 0 0 220 520" xml:space="preserve">
            <!-- Enhanced cake layers with gradients -->
            <defs>
                <linearGradient id="cakeGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#d2691e;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#cd853f;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#daa520;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="cakeGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#8b4513;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#a0522d;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#bc8f8f;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="frostingGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#fffacd;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#fff8dc;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#f5f5dc;stop-opacity:1" />
                </linearGradient>
            </defs>
            
            <path fill="url(#cakeGrad1)" d="M173.667-13.94c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002
            c44.697,0,96.586,0,147.334,0C177.667-29.942,177.668-13.94,173.667-13.94z">
                <animate id="bizcocho_3" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1" begin="relleno_2.end" dur="0.4s" fill="freeze" values="
                                  M173.667-13.94c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002
            c44.697,0,96.586,0,147.334,0C177.667-29.942,177.668-13.94,173.667-13.94z
                                  ;
                                  M173.667,411.567c-47.995,12.408-102.955,12.561-147.334,0
            c-3.848-1.089-0.189-16.089,3.661-15.002c44.836,12.66,90.519,12.753,139.427,0.07
            C173.293,395.631,177.541,410.566,173.667,411.567z
                                  ;
                                  M173.667,427.569c-49.795,0-101.101,0-147.334,0c-3.999,0-4-16.002,0-16.002
            c46.385,0,97.539,0,147.334,0C177.668,411.567,177.667,427.569,173.667,427.569z
                                  " />
            </path>
            <path fill="url(#cakeGrad2)" d="M100-178.521c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227
            c0,19.144,0,57.431,0,76.574c0,10.152,0,40.607,0,40.607c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364c0,0,0-30.455,0-40.607c0-19.144,0-57.432,0-76.575c0-11.057,0-44.226,0-44.226C96.636-177.015,98.142-178.521,100-178.521
            L100-178.521z">
                <animate id="relleno_2" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 0.58 1" begin="bizcocho_2.end" dur="0.6s" fill="freeze" values="
                                  M100-178.521c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227
            c0,19.144,0,57.431,0,76.574c0,10.152,0,40.607,0,40.607c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364c0,0,0-30.455,0-40.607c0-19.144,0-57.432,0-76.575c0-11.057,0-44.226,0-44.226C96.636-177.015,98.142-178.521,100-178.521
            L100-178.521z
                                  ;
                                  M100,267.257c1.858,0,3.364,1.506,3.364,3.363c0,0,0,33.17,0,44.227
            c0,19.143,0,57.43,0,76.574c0,10.151,0,40.606,0,40.606c0,1.858-1.506,3.364-3.364,3.364l0,0c-1.858,0-3.364-1.506-3.364-3.364
            c0,0,0-30.455,0-40.606c0-19.145,0-57.432,0-76.576c0-11.057,0-44.225,0-44.225C96.636,268.763,98.142,267.257,100,267.257
            L100,267.257z
                                  ;
                                  M93.928,405.433c-0.655,6.444-0.102,9.067,2.957,11.798c0,0,8.083,5.571,16.828,3.503
            c18.629-4.406,43.813,6.194,50.792,7.791c14.75,3.375,9.162,6.867,9.162,6.867c-2.412,2.258-58.328,0-73.667,0l0,0
            c-1.858,0-69.995,2.133-73.667,0c0,0-3.337-2.439,6.172-5.992c11.375-4.25,52.875,8.822,47.139-9.442
            c-6.333-20.167,5.226-21.514,5.226-21.514c3.435-0.915,12.78-6.663,10.923-0.546L93.928,405.433z
                                  ;
                                  M102.242,427.569c5.348,0,14.079,0,17.462,0c0,0,17.026,0,27.504,0
            c19.143,0,20.39-3.797,26.459,0c3,1.877,0,7.823,0,7.823c-2.412,2.258-58.328,0-73.667,0l0,0c-1.858,0-67.187,0-73.667,0
            c0,0-4.125-4.983,0-7.823c5.201-3.58,16.085,0,23.725,0c8.841,0,20.762,0,20.762,0c3.686,0,8.597,0,19.511,0H102.242z
                                  " />
            </path>
            <path fill="url(#cakeGrad1)" d="M173.667-15.929c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002
            c43.566,0,97.96,0,147.334,0C177.667-31.931,177.666-15.929,173.667-15.929z">
                <animate id="bizcocho_2" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0.25 0 0.58 1" begin="relleno_1.end" dur="0.6s" fill="freeze" values="
                                  M173.667-15.929c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002
            c43.566,0,97.96,0,147.334,0C177.667-31.931,177.666-15.929,173.667-15.929z
                                  ;
                                  M173.434,445.393c-47.269,8.001-105.245,8.001-147.334,0c-3.929-0.747-0.692-16.543,3.243-15.824
            c43.828,8.001,92.165,8.001,140.739,0C174.029,428.918,177.377,444.726,173.434,445.393z
                                  ;
                                  M173.667,449.514c-47.576-5.454-102.799-5.744-147.333,0c-3.966,0.512-3.938-15.297,0-16.002
            c43.683-7.823,97.646-8.026,147.333,0C177.616,434.15,177.642,449.969,173.667,449.514z
                                  ;
                                  M173.667,451.394c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002
            c44.697,0,96.586,0,147.334,0C177.667,435.392,177.668,451.394,173.667,451.394z
                                  " />
            </path>
            <path fill="url(#cakeGrad2)" d="M101.368-73.685c0,12.164,0,15.18,0,28.519c0,22.702,0-13.661,0,8.304c0,14.48,0,18.233,0,30.512
            c0,1.753-2.958,1.847-2.958,0c0-12.68,0-16.277,0-30.401c0-21.983,0,11.66,0-8.305c0-13.027,0-15.992,0-28.628
            C98.411-75.883,101.368-75.592,101.368-73.685z">
                <animate id="relleno_1" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 0.6 1" begin="bizcocho_1.end" dur="0.6s" fill="freeze" values="
                                  M101.368-73.685c0,12.164,0,15.18,0,28.519c0,22.702,0-13.661,0,8.304c0,14.48,0,18.233,0,30.512
            c0,1.753-2.958,1.847-2.958,0c0-12.68,0-16.277,0-30.401c0-21.983,0,11.66,0-8.305c0-13.027,0-15.992,0-28.628
            C98.411-75.883,101.368-75.592,101.368-73.685z
                                  ;
                                  M101.368,350.885c0,12.164,0,65.18,0,78.518c0,22.703,0-33.66,0-11.695c0,14.48,0,28.232,0,40.512
            c0,1.753-2.958,1.847-2.958,0c0-12.68,0-26.277,0-40.402c0-21.982,0,31.66,0,11.695c0-13.027,0-65.992,0-78.627
            C98.411,348.686,101.368,348.977,101.368,350.885z
                                  ;
                                  M128.38,447.567c37.626,6.312,39.303,13.658,26.833,12.833c-22.653-1.499-13.636-0.831-23.302-0.831
            c-14.48,0-17.884,0-30.163,0c-2.087,0-2.068,0-3.915,0c-13.333,0-8.963,0-23.088,0c-11.668,0-14.062,5.995-27.532,1.164
            c-12.629-4.529,38.667-3.167,46.833-17.333C100.077,432.94,105.546,443.736,128.38,447.567z
                                  ;
                                  M173.667,451.394c2.875,0,2.997,9.257,0,9.131c-22.662-0.956-32.09-0.956-41.756-0.956
            c-14.48,0-17.884,0-30.163,0c-2.087,0-2.068,0-3.915,0c-13.333,0-8.963,0-23.088,0c-11.668,0-34.99-0.294-48.412,1.831
            c-4.109,0.65-3.01-10.006,0-10.006C37.129,451.394,149.379,451.394,173.667,451.394z
                                  " />
            </path>
            <path fill="url(#cakeGrad1)" d="M173.667,21.571c-33.174,0-111.467,0-147.334,0c-4,0-4-16.002,0-16.002c39.836,0,105.982,0,147.334,0
            C177.668,5.569,177.667,21.571,173.667,21.571z">
                <animate id="bizcocho_1" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 1 1; 0.25 0 1 1; 0 0 1 1; 0.25 0 0.6 1" begin="2s" dur="1s" fill="freeze" values="
                                  M173.667,21.571c-33.174,0-111.467,0-147.334,0c-4,0-4-16.002,0-16.002c39.836,0,105.982,0,147.334,0
            C177.668,5.569,177.667,21.571,173.667,21.571z
                                  ;
                                  M173.667,459.569c-33.197,16.002-110.782,16.002-147.334,0c-3.664-1.604,1.614-15.617,5.337-14.153
            c40.702,16.002,94.289,16.104,136.505,0.103C171.917,444.1,177.271,457.832,173.667,459.569z
                                  ;
                                  M171.817,475.571c-39.361-3.001-105.438-2.571-143.556,0c-3.991,0.27-7.377-14.736-3.387-15.014
            c41.553-2.888,104.421-3.121,150.51-0.233C179.378,460.574,175.806,475.875,171.817,475.571z
                                  ;
                                  M171.817,459.564c-38.8-12.188-104.504-13.762-143.556,0c-3.772,1.329-7.961-12.604-4.178-13.905
            c40.864-14.064,105.114-15.52,151.918-0.973C179.822,445.874,175.634,460.762,171.817,459.564z
                                  ;
                                  M173.667,475.571c-46.376-5.005-105.924-4.003-147.334,0c-3.981,0.385-3.479-15.421,0.479-16.002
            c43.087-6.327,97.705-7.083,146.855,0.438C177.621,460.613,177.644,476,173.667,475.571z
                                  ;
                                  M173.667,474.117c-46.376,1.866-105.638,2.01-147.334,0c-3.995-0.192-3.52-16.144,0.479-16.002
            c43.794,1.55,96.341,1.541,145.723,0C176.532,457.99,177.663,473.956,173.667,474.117z
                                  ;
                                  M173.667,475.571c-46.512,0-105.486,0-147.334,0c-3.999,0-4-16.002,0-16.002c43.566,0,97.96,0,147.334,0
            C177.667,459.569,177.666,475.571,173.667,475.571z
                                  " />
            </path>
            <path fill="url(#frostingGrad)" d="M104.812,113.216c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.375
          c0-5.143,0-15.427,0-20.568c0-7.333,0-21.998,0-29.33c0-5.523,0-16.569,0-22.092c0-3.295,0-9.885,0-13.181
          C95.188,2.551,97.353,0,100,0c2.648,0,4.812,2.551,4.812,5.669c0,3.248,0,9.743,0,12.991c0,5.428,0,16.284,0,21.711
          c0,7.618,0,22.854,0,30.472c0,4.952,0,14.854,0,19.807C104.812,96.292,104.812,107.576,104.812,113.216z">
                <animate id="crema" attributeName="d" calcMode="spline" keySplines="0 0 1 1; 0 0 1 1; 0 0 1 1; 0.25 0 1 1; 0 0 1 1; 0 0 0.58 1" begin="bizcocho_3.end" dur="2.5s" fill="freeze" values="
                                  M104.812,113.216c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.375
          c0-5.143,0-15.427,0-20.568c0-7.333,0-21.998,0-29.33c0-5.523,0-16.569,0-22.092c0-3.295,0-9.885,0-13.181
          C95.188,2.551,97.353,0,100,0c2.648,0,4.812,2.551,4.812,5.669c0,3.248,0,9.743,0,12.991c0,5.428,0,16.284,0,21.711
          c0,7.618,0,22.854,0,30.472c0,4.952,0,14.854,0,19.807C104.812,96.292,104.812,107.576,104.812,113.216z
                                  ;
                                  M104.812,405.897c0,3.119-2.164,5.67-4.812,5.67c-2.646,0-4.812-2.551-4.812-5.67c0-5.594,0-16.782,0-22.376
          c0-5.143,0-15.426,0-20.568c0-7.332,0-21.997,0-29.33c0-5.522,0-16.568,0-22.092c0-3.295,0-9.885,0-13.181
          c0-3.118,2.165-5.669,4.812-5.669c2.648,0,4.812,2.551,4.812,5.669c0,3.247,0,9.743,0,12.991c0,5.428,0,16.283,0,21.711
          c0,7.618,0,22.854,0,30.473c0,4.951,0,14.854,0,19.807C104.812,388.972,104.812,400.256,104.812,405.897z
                                  ;
                                  M111.873,411.567c-3.119,0-9.226,0-11.874,0c-2.646,0-7.748,0-10.867,0c-7.086,0-12.698,0-18.292,0
          c-6.592,0-12.871,7.371-19.166,3.008c-10.043-6.961-7.776-10.169,2.991-17.745c12.61-8.873,27.713,1.994,25.919-7.531
          c-2.589-13.742,11.008-14.513,11.365-17.789c0.441-4.051,4.235-11.107,8.051-8.175c3.113,2.393,1.007,8.008,0,13.159
          c-1.871,9.569,8.058,2.113,9.494,14.155c2.592,21.732,21.184-0.675,29.309,7.976c5.216,5.553,18.413,5.552,15.426,12.942
          c-3.131,7.745-15.825-4.369-23.8,2.903C126.261,418.271,118.301,411.567,111.873,411.567z
                                  " />
            </path>
            <rect x="10" y="475.571" fill="url(#frostingGrad)" width="180" height="6" rx="3" />
            
            <!-- Decorative elements on cake -->
            <circle cx="70" cy="400" r="8" fill="#ff6b6b" opacity="0.8">
                <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" repeatCount="indefinite"/>
            </circle>
            <circle cx="130" cy="390" r="6" fill="#feca57" opacity="0.8">
                <animate attributeName="opacity" values="0.8;1;0.8" dur="1.8s" repeatCount="indefinite"/>
            </circle>
            <circle cx="100" cy="420" r="7" fill="#48dbfb" opacity="0.8">
                <animate attributeName="opacity" values="0.8;1;0.8" dur="2.2s" repeatCount="indefinite"/>
            </circle>
        </svg>
    </div>

    <!-- Birthday Text -->
    <div class="birthday-text">
        <h1>Happy Birthday!</h1>
        <div class="name">Kashish Ji</div>
    </div>

    <!-- Music Control -->
    <div class="music-control" id="musicControl" title="Click to play birthday music">
        🎵
    </div>

    <script>
        // Birthday music
        let audioContext;
        let musicPlaying = false;
        
        // Initialize audio context (required for modern browsers)
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // Simple Happy Birthday melody using Web Audio API
        function playHappyBirthdayTune() {
            initAudio();
            
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            // Happy Birthday melody notes (simplified)
            const notes = [
                {freq: 261.63, duration: 0.5}, // C
                {freq: 261.63, duration: 0.5}, // C
                {freq: 293.66, duration: 1.0}, // D
                {freq: 261.63, duration: 1.0}, // C
                {freq: 349.23, duration: 1.0}, // F
                {freq: 329.63, duration: 2.0}, // E
                
                {freq: 261.63, duration: 0.5}, // C
                {freq: 261.63, duration: 0.5}, // C
                {freq: 293.66, duration: 1.0}, // D
                {freq: 261.63, duration: 1.0}, // C
                {freq: 392.00, duration: 1.0}, // G
                {freq: 349.23, duration: 2.0}, // F
                
                {freq: 261.63, duration: 0.5}, // C
                {freq: 261.63, duration: 0.5}, // C
                {freq: 523.25, duration: 1.0}, // C (higher)
                {freq: 440.00, duration: 1.0}, // A
                {freq: 349.23, duration: 1.0}, // F
                {freq: 329.63, duration: 1.0}, // E
                {freq: 293.66, duration: 2.0}, // D
                
                {freq: 466.16, duration: 0.5}, // Bb
                {freq: 466.16, duration: 0.5}, // Bb
                {freq: 440.00, duration: 1.0}, // A
                {freq: 349.23, duration: 1.0}, // F
                {freq: 392.00, duration: 1.0}, // G
                {freq: 349.23, duration: 2.0}  // F
            ];

            let currentTime = audioContext.currentTime;
            
            notes.forEach((note, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(note.freq, currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0, currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + note.duration);
                
                oscillator.start(currentTime);
                oscillator.stop(currentTime + note.duration);
                
                currentTime += note.duration * 0.6; // Slight overlap between notes
            });
        }

        // Slideshow functionality
        let slideIndex = 1;
        let slideshowVisible = false;
        let autoSlideInterval;

        function currentSlide(n) {
            if (slideshowVisible) {
                showSlide(slideIndex = n);
            }
        }

        function showSlide(n) {
            const slides = document.getElementsByClassName("slide");
            const dots = document.getElementsByClassName("nav-dot");
            
            if (n > slides.length) { slideIndex = 1; }
            if (n < 1) { slideIndex = slides.length; }
            
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove("active");
            }
            
            for (let i = 0; i < dots.length; i++) {
                dots[i].classList.remove("active");
            }
            
            if (slides[slideIndex - 1]) {
                slides[slideIndex - 1].classList.add("active");
            }
            if (dots[slideIndex - 1]) {
                dots[slideIndex - 1].classList.add("active");
            }
        }

        // Auto slideshow
        function autoSlideshow() {
            if (slideshowVisible) {
                slideIndex++;
                if (slideIndex > 6) slideIndex = 1;
                showSlide(slideIndex);
            }
        }

        // Show slideshow
        function showSlideshow() {
            slideshowVisible = true;
            document.getElementById('slideshowContainer').classList.add('show');
            slideIndex = 1;
            showSlide(slideIndex);
            autoSlideInterval = setInterval(autoSlideshow, 4000); // Change slide every 4 seconds
        }

        // Close slideshow
        function closeSlideshow() {
            slideshowVisible = false;
            document.getElementById('slideshowContainer').classList.remove('show');
            clearInterval(autoSlideInterval);
        }

        // Keyboard navigation for slideshow
        document.addEventListener('keydown', function(e) {
            if (slideshowVisible) {
                if (e.key === 'ArrowLeft') {
                    currentSlide(slideIndex - 1);
                } else if (e.key === 'ArrowRight') {
                    currentSlide(slideIndex + 1);
                } else if (e.key === 'Escape') {
                    closeSlideshow();
                }
            }
        });

        // Global variables for fireworks
        let w = window.innerWidth;
        let h = window.innerHeight;
        let canvas = document.getElementById('c');
        let ctx = canvas.getContext('2d');
        let hw = w / 2;
        let hh = h / 2;
        
        canvas.width = w;
        canvas.height = h;

        // Fireworks configuration
        const opts = {
            strings: ["HAPPY", "BIRTHDAY!", "🎉"],
            charSize: 30,
            charSpacing: 35,
            lineHeight: 40,
            cx: w / 2,
            cy: h / 2,
            fireworkPrevPoints: 10,
            fireworkBaseLineWidth: 5,
            fireworkAddedLineWidth: 8,
            fireworkSpawnTime: 200,
            fireworkBaseReachTime: 30,
            fireworkAddedReachTime: 30,
            fireworkCircleBaseSize: 20,
            fireworkCircleAddedSize: 10,
            fireworkCircleBaseTime: 30,
            fireworkCircleAddedTime: 30,
            fireworkCircleFadeBaseTime: 10,
            fireworkCircleFadeAddedTime: 5,
            fireworkBaseShards: 5,
            fireworkAddedShards: 5,
            fireworkShardPrevPoints: 3,
            fireworkShardBaseVel: 4,
            fireworkShardAddedVel: 2,
            fireworkShardBaseSize: 3,
            fireworkShardAddedSize: 3,
            gravity: 0.1,
            upFlow: -0.1,
            letterContemplatingWaitTime: 360,
            balloonSpawnTime: 20,
            balloonBaseInflateTime: 10,
            balloonAddedInflateTime: 10,
            balloonBaseSize: 20,
            balloonAddedSize: 20,
            balloonBaseVel: 0.4,
            balloonAddedVel: 0.4,
            balloonBaseRadian: -(Math.PI / 2 - 0.5),
            balloonAddedRadian: -1,
        };

        const calc = {
            totalWidth: opts.charSpacing * Math.max(opts.strings[0].length, opts.strings[1].length),
        };

        const Tau = Math.PI * 2;
        const TauQuarter = Tau / 4;
        let letters = [];
        let animationComplete = false;

        ctx.font = opts.charSize + "px Verdana";

        // Letter class for fireworks animation
        function Letter(char, x, y) {
            this.char = char;
            this.x = x;
            this.y = y;
            this.dx = -ctx.measureText(char).width / 2;
            this.dy = +opts.charSize / 2;
            this.fireworkDy = this.y - hh;
            
            const hue = (x / calc.totalWidth) * 360;
            this.color = `hsl(${hue},80%,50%)`;
            this.lightAlphaColor = `hsla(${hue},80%,light%,alp)`;
            this.lightColor = `hsl(${hue},80%,light%)`;
            this.alphaColor = `hsla(${hue},80%,50%,alp)`;
            
            this.reset();
        }

        Letter.prototype.reset = function () {
            this.phase = "firework";
            this.tick = 0;
            this.spawned = false;
            this.spawningTime = (opts.fireworkSpawnTime * Math.random()) | 0;
            this.reachTime = (opts.fireworkBaseReachTime + opts.fireworkAddedReachTime * Math.random()) | 0;
            this.lineWidth = opts.fireworkBaseLineWidth + opts.fireworkAddedLineWidth * Math.random();
            this.prevPoints = [[0, hh, 0]];
        };

        Letter.prototype.step = function () {
            if (this.phase === "firework") {
                if (!this.spawned) {
                    ++this.tick;
                    if (this.tick >= this.spawningTime) {
                        this.tick = 0;
                        this.spawned = true;
                    }
                } else {
                    ++this.tick;
                    
                    const linearProportion = this.tick / this.reachTime;
                    const armonicProportion = Math.sin(linearProportion * TauQuarter);
                    const x = linearProportion * this.x;
                    const y = hh + armonicProportion * this.fireworkDy;

                    if (this.prevPoints.length > opts.fireworkPrevPoints)
                        this.prevPoints.shift();

                    this.prevPoints.push([x, y, linearProportion * this.lineWidth]);

                    const lineWidthProportion = 1 / (this.prevPoints.length - 1);

                    for (let i = 1; i < this.prevPoints.length; ++i) {
                        const point = this.prevPoints[i];
                        const point2 = this.prevPoints[i - 1];

                        ctx.strokeStyle = this.alphaColor.replace("alp", i / this.prevPoints.length);
                        ctx.lineWidth = point[2] * lineWidthProportion * i;
                        ctx.beginPath();
                        ctx.moveTo(point[0], point[1]);
                        ctx.lineTo(point2[0], point2[1]);
                        ctx.stroke();
                    }

                    if (this.tick >= this.reachTime) {
                        this.phase = "contemplate";
                        this.circleFinalSize = opts.fireworkCircleBaseSize + opts.fireworkCircleAddedSize * Math.random();
                        this.circleCompleteTime = (opts.fireworkCircleBaseTime + opts.fireworkCircleAddedTime * Math.random()) | 0;
                        this.circleCreating = true;
                        this.circleFading = false;
                        this.circleFadeTime = (opts.fireworkCircleFadeBaseTime + opts.fireworkCircleFadeAddedTime * Math.random()) | 0;
                        this.tick = 0;
                        this.tick2 = 0;
                        this.shards = [];

                        const shardCount = (opts.fireworkBaseShards + opts.fireworkAddedShards * Math.random()) | 0;
                        const angle = Tau / shardCount;
                        const cos = Math.cos(angle);
                        const sin = Math.sin(angle);
                        let x = 1;
                        let y = 0;

                        for (let i = 0; i < shardCount; ++i) {
                            const x1 = x;
                            x = x * cos - y * sin;
                            y = y * cos + x1 * sin;
                            this.shards.push(new Shard(this.x, this.y, x, y, this.alphaColor));
                        }
                    }
                }
            } else if (this.phase === "contemplate") {
                ++this.tick;

                if (this.circleCreating) {
                    ++this.tick2;
                    const proportion = this.tick2 / this.circleCompleteTime;
                    const armonic = -Math.cos(proportion * Math.PI) / 2 + 0.5;

                    ctx.beginPath();
                    ctx.fillStyle = this.lightAlphaColor
                        .replace("light", 50 + 50 * proportion)
                        .replace("alp", proportion);
                    ctx.arc(this.x, this.y, armonic * this.circleFinalSize, 0, Tau);
                    ctx.fill();

                    if (this.tick2 > this.circleCompleteTime) {
                        this.tick2 = 0;
                        this.circleCreating = false;
                        this.circleFading = true;
                    }
                } else if (this.circleFading) {
                    ctx.fillStyle = this.lightColor.replace("light", 70);
                    ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);

                    ++this.tick2;
                    const proportion = this.tick2 / this.circleFadeTime;
                    const armonic = -Math.cos(proportion * Math.PI) / 2 + 0.5;

                    ctx.beginPath();
                    ctx.fillStyle = this.lightAlphaColor
                        .replace("light", 100)
                        .replace("alp", 1 - armonic);
                    ctx.arc(this.x, this.y, this.circleFinalSize, 0, Tau);
                    ctx.fill();

                    if (this.tick2 >= this.circleFadeTime) this.circleFading = false;
                } else {
                    ctx.fillStyle = this.lightColor.replace("light", 70);
                    ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);
                }

                for (let i = 0; i < this.shards.length; ++i) {
                    this.shards[i].step();
                    if (!this.shards[i].alive) {
                        this.shards.splice(i, 1);
                        --i;
                    }
                }

                if (this.tick > opts.letterContemplatingWaitTime) {
                    this.phase = "balloon";
                    this.tick = 0;
                    this.spawning = true;
                    this.spawnTime = (opts.balloonSpawnTime * Math.random()) | 0;
                    this.inflating = false;
                    this.inflateTime = (opts.balloonBaseInflateTime + opts.balloonAddedInflateTime * Math.random()) | 0;
                    this.size = (opts.balloonBaseSize + opts.balloonAddedSize * Math.random()) | 0;

                    const rad = opts.balloonBaseRadian + opts.balloonAddedRadian * Math.random();
                    const vel = opts.balloonBaseVel + opts.balloonAddedVel * Math.random();

                    this.vx = Math.cos(rad) * vel;
                    this.vy = Math.sin(rad) * vel;
                }
            } else if (this.phase === "balloon") {
                ctx.strokeStyle = this.lightColor.replace("light", 80);

                if (this.spawning) {
                    ++this.tick;
                    ctx.fillStyle = this.lightColor.replace("light", 70);
                    ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);

                    if (this.tick >= this.spawnTime) {
                        this.tick = 0;
                        this.spawning = false;
                        this.inflating = true;
                    }
                } else if (this.inflating) {
                    ++this.tick;

                    const proportion = this.tick / this.inflateTime;
                    const x = (this.cx = this.x);
                    const y = (this.cy = this.y - this.size * proportion);

                    ctx.fillStyle = this.alphaColor.replace("alp", proportion);
                    ctx.beginPath();
                    generateBalloonPath(x, y, this.size * proportion);
                    ctx.fill();

                    // Removed balloon string line during inflation

                    ctx.fillStyle = this.lightColor.replace("light", 70);
                    ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);

                    if (this.tick >= this.inflateTime) {
                        this.tick = 0;
                        this.inflating = false;
                    }
                } else {
                    this.cx += this.vx;
                    this.cy += this.vy += opts.upFlow;

                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    generateBalloonPath(this.cx, this.cy, this.size);
                    ctx.fill();

                    // Removed balloon string line during floating

                    ctx.fillStyle = this.lightColor.replace("light", 70);
                    ctx.fillText(this.char, this.cx + this.dx, this.cy + this.dy + this.size);

                    if (this.cy + this.size < -hh || this.cx < -hw || this.cx > hw)
                        this.phase = "done";
                }
            }
        };

        // Shard class for firework particles
        function Shard(x, y, vx, vy, color) {
            const vel = opts.fireworkShardBaseVel + opts.fireworkShardAddedVel * Math.random();
            this.vx = vx * vel;
            this.vy = vy * vel;
            this.x = x;
            this.y = y;
            this.prevPoints = [[x, y]];
            this.color = color;
            this.alive = true;
            this.size = opts.fireworkShardBaseSize + opts.fireworkShardAddedSize * Math.random();
        }

        Shard.prototype.step = function () {
            this.x += this.vx;
            this.y += this.vy += opts.gravity;

            if (this.prevPoints.length > opts.fireworkShardPrevPoints)
                this.prevPoints.shift();

            this.prevPoints.push([this.x, this.y]);

            const lineWidthProportion = this.size / this.prevPoints.length;

            for (let k = 0; k < this.prevPoints.length - 1; ++k) {
                const point = this.prevPoints[k];
                const point2 = this.prevPoints[k + 1];

                ctx.strokeStyle = this.color.replace("alp", k / this.prevPoints.length);
                ctx.lineWidth = k * lineWidthProportion;
                ctx.beginPath();
                ctx.moveTo(point[0], point[1]);
                ctx.lineTo(point2[0], point2[1]);
                ctx.stroke();
            }

            if (this.prevPoints[0][1] > hh) this.alive = false;
        };

        // Balloon path generator
        function generateBalloonPath(x, y, size) {
            ctx.moveTo(x, y);
            ctx.bezierCurveTo(
                x - size / 2,
                y - size / 2,
                x - size / 4,
                y - size,
                x,
                y - size
            );
            ctx.bezierCurveTo(x + size / 4, y - size, x + size / 2, y - size / 2, x, y);
        }

        // Main animation function
        function anim() {
            window.requestAnimationFrame(anim);

            ctx.fillStyle = "rgba(17, 17, 17, 0.3)"; // Increased opacity to remove trails
            ctx.fillRect(0, 0, w, h);

            ctx.translate(hw, hh);

            let done = true;
            for (let l = 0; l < letters.length; ++l) {
                letters[l].step();
                if (letters[l].phase !== "done") done = false;
            }

            ctx.translate(-hw, -hh);

            if (done && !animationComplete) {
                animationComplete = true;
                setTimeout(showCake, 1000);
                for (let l = 0; l < letters.length; ++l) letters[l].reset();
            }
        }

        // Initialize letters
        for (let i = 0; i < opts.strings.length; ++i) {
            for (let j = 0; j < opts.strings[i].length; ++j) {
                letters.push(
                    new Letter(
                        opts.strings[i][j],
                        j * opts.charSpacing + opts.charSpacing / 2 - (opts.strings[i].length * opts.charSize) / 2,
                        i * opts.lineHeight + opts.lineHeight / 2 - (opts.strings.length * opts.lineHeight) / 2
                    )
                );
            }
        }

        // Show cake function
        function showCake() {
            document.getElementById('cakeContainer').classList.add('show');
            createConfetti();
            createFloatingHearts();
            
            // Play happy birthday tune when cake appears
            setTimeout(() => {
                playHappyBirthdayTune();
            }, 1000);
            
            // Show slideshow after cake animation completes
            setTimeout(() => {
                showSlideshow();
            }, 8000); // Show slideshow 8 seconds after cake appears
        }

        // Create enhanced confetti effect
        function createConfetti() {
            const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43'];
            
            for (let i = 0; i < 150; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = (Math.random() * 4 + 3) + 's';
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.remove();
                        }
                    }, 8000);
                }, i * 30);
            }
        }

        // Create floating hearts
        function createFloatingHearts() {
            const hearts = ['💖', '💝', '🎈', '🎉', '✨', '🌟', '💫', '🎊'];
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.fontSize = (Math.random() * 15 + 15) + 'px';
                    heart.style.animationDuration = (Math.random() * 6 + 4) + 's';
                    heart.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.remove();
                        }
                    }, 12000);
                }, i * 200);
            }
        }

        // Create background particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particle.style.width = (Math.random() * 4 + 2) + 'px';
                particle.style.height = particle.style.width;
                particlesContainer.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.remove();
                    }
                }, 8000);
            }, 300);
        }

        // Music functionality
        document.getElementById('musicControl').addEventListener('click', function() {
            musicPlaying = !musicPlaying;
            this.innerHTML = musicPlaying ? '🎶' : '🎵';
            this.style.background = musicPlaying ? 
                'linear-gradient(45deg, #ff9ff3, #feca57)' : 
                'linear-gradient(45deg, #ff6b6b, #ff8e8e)';
            
            // Add pulsing effect when music is playing
            if (musicPlaying) {
                this.style.animation = 'pulse 1s ease-in-out infinite';
                playHappyBirthdayTune();
            } else {
                this.style.animation = 'none';
            }
        });

        // Window resize handler
        window.addEventListener("resize", function () {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            hw = w / 2;
            hh = h / 2;
            ctx.font = opts.charSize + "px Verdana";
        });

        // Start animations
        anim();
        createParticles();

        // Add some initial sparkle effects
        setTimeout(() => {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.innerHTML = ['✨', '⭐', '🌟', '💫'][Math.floor(Math.random() * 4)];
                    sparkle.style.position = 'absolute';
                    sparkle.style.left = Math.random() * window.innerWidth + 'px';
                    sparkle.style.top = Math.random() * window.innerHeight + 'px';
                    sparkle.style.fontSize = (Math.random() * 15 + 15) + 'px';
                    sparkle.style.pointerEvents = 'none';
                    sparkle.style.animation = 'sparkle 3s ease-out forwards';
                    sparkle.style.zIndex = '50';
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.remove();
                        }
                    }, 3000);
                }, i * 150);
            }
        }, 2000);

        // Add continuous sparkle effects after cake appears
        setTimeout(() => {
            setInterval(() => {
                const sparkle = document.createElement('div');
                sparkle.innerHTML = ['✨', '⭐', '🌟', '💫'][Math.floor(Math.random() * 4)];
                sparkle.style.position = 'absolute';
                sparkle.style.left = Math.random() * window.innerWidth + 'px';
                sparkle.style.top = Math.random() * window.innerHeight + 'px';
                sparkle.style.fontSize = (Math.random() * 12 + 12) + 'px';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.animation = 'sparkle 2s ease-out forwards';
                sparkle.style.zIndex = '50';
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    if (sparkle.parentNode) {
                        sparkle.remove();
                    }
                }, 2000);
            }, 1000);
        }, 10000);

        // Add pulse animation for music control
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% {
                    transform: scale(1);
                    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
                }
                50% {
                    transform: scale(1.1);
                    box-shadow: 0 12px 35px rgba(255, 107, 107, 0.6);
                }
                100% {
                    transform: scale(1);
                    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
                }
            }
            
            /* Additional hover effects for slideshow */
            .slideshow-container:hover {
                transform: scale(1.05);
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            }
            
            /* Glowing border effect for active slide */
            .slide.active {
                animation: slideIn 0.8s ease-in-out, glow 2s ease-in-out infinite alternate;
            }
            
            @keyframes glow {
                from {
                    box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.3);
                }
                to {
                    box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.6);
                }
            }
            
            /* Enhanced birthday text effects */
            .birthday-text h1 {
                text-shadow: 
                    2px 2px 10px rgba(0, 0, 0, 0.5),
                    0 0 20px rgba(255, 107, 107, 0.3),
                    0 0 40px rgba(255, 182, 193, 0.2);
            }
            
            /* Cake container hover effect */
            .cake-container:hover #cake {
                transform: scale(1.05);
                filter: drop-shadow(0 30px 60px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 50px rgba(255, 182, 193, 0.8));
            }
        `;
        document.head.appendChild(style);

        // Add click interaction for cake
        document.getElementById('cake').addEventListener('click', function() {
            // Create burst of confetti on cake click
            createConfetti();
            
            // Add temporary sparkle burst
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.innerHTML = '✨';
                    sparkle.style.position = 'absolute';
                    sparkle.style.left = (window.innerWidth / 2 + (Math.random() - 0.5) * 200) + 'px';
                    sparkle.style.top = (window.innerHeight / 2 + (Math.random() - 0.5) * 200) + 'px';
                    sparkle.style.fontSize = '20px';
                    sparkle.style.pointerEvents = 'none';
                    sparkle.style.animation = 'sparkle 1.5s ease-out forwards';
                    sparkle.style.zIndex = '200';
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.remove();
                        }
                    }, 1500);
                }, i * 50);
            }
        });

        // Add error handling for images
        const slides = document.querySelectorAll('.slide');
        slides.forEach(slide => {
            slide.addEventListener('error', function() {
                // Create a colorful placeholder if image fails to load
                this.style.background = `linear-gradient(45deg, 
                    hsl(${Math.random() * 360}, 70%, 60%), 
                    hsl(${Math.random() * 360}, 70%, 70%))`;
                this.style.display = 'flex';
                this.style.alignItems = 'center';
                this.style.justifyContent = 'center';
                this.style.color = 'white';
                this.style.fontSize = '24px';
                this.style.fontWeight = 'bold';
                this.innerHTML = '📸';
            });
        });
    </script>
</body>
</html>
                